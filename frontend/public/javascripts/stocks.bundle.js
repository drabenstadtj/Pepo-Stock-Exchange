document.addEventListener("DOMContentLoaded",(()=>{const e=window.apiUrl,t=document.getElementById("stocks-body"),n=document.getElementById("symbol-header"),c=document.getElementById("price-header"),a=document.getElementById("change-header");let o=[],d="symbol",s="asc";async function i(){try{const t=await fetch(`${e}/stocks/`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);o=await t.json(),r()}catch(e){console.error("Error fetching stocks data:",e)}}function r(){o.sort(((e,t)=>{let n,c;return"price"===d?(n=parseFloat(e.price),c=parseFloat(t.price)):"change"===d?(n=parseFloat(e.change),c=parseFloat(t.change)):(n=e[d],c=t[d]),n<c?"asc"===s?-1:1:n>c?"asc"===s?1:-1:0})),function(e){console.log("Updating stocks table..."),t.innerHTML="",e.forEach((e=>{const n=document.createElement("tr"),c=document.createElement("td");c.classList.add("stock-popup");const a=document.createElement("span");a.textContent=e.symbol;const o=document.createElement("div");var d;o.classList.add("popuptext"),o.innerHTML=`\n        <h3>${e.symbol}</h3>\n        <p>Name: ${e.name}</p>\n        <p>Sector: ${e.sector}</p>\n        <p>Low: $${e.low.toFixed(2)}</p>\n        <p>High: $${e.high.toFixed(2)}</p>\n        <p>Updated: ${d=e.last_update,new Date(d).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}</p>\n      `,c.appendChild(a),c.appendChild(o),n.appendChild(c);const s=document.createElement("td");s.textContent="$"+e.price.toFixed(2),n.appendChild(s);const i=document.createElement("td");i.textContent=e.change.toFixed(2),i.classList.add(e.change>=0?"positive-change":"negative-change"),n.appendChild(i),t.appendChild(n)}))}(o),function(){n.textContent="Symbol",c.textContent="Price",a.textContent="Change";const e="asc"===s?"↑":"↓";"symbol"===d?n.textContent+=` ${e}`:"price"===d?c.textContent+=` ${e}`:"change"===d&&(a.textContent+=` ${e}`)}()}n.addEventListener("click",(()=>{d="symbol",s="asc"===s?"desc":"asc",r()})),c.addEventListener("click",(()=>{d="price",s="asc"===s?"desc":"asc",r()})),a.addEventListener("click",(()=>{d="change",s="asc"===s?"desc":"asc",r()})),i(),setInterval(i,1e4)}));